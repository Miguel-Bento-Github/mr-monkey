<script lang="ts">
import { defineComponent, ref } from "vue";

export default defineComponent({
  setup() {
    const color = ref("#94d2bd");
    const dashOffset = ref("884");
    const dashArray = ref("0 884");

    const useStroke = () => {
      dashOffset.value = "0";
      dashArray.value = "884 0";
    };

    const update = () => {
      requestAnimationFrame(useStroke);
    };

    return { color, dashOffset, dashArray, update };
  },
});
</script>

<template>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    version="1.1"
    x="0"
    y="0"
    viewBox="0 0 80 100"
    xml:space="preserve"
    @mouseenter="update"
  >
    <path
      class="path path--animated"
      stoke-width="4px"
      :stroke="color"
      :stroke-dashoffset="dashOffset"
      :stroke-dasharray="dashArray"
      d="M75.836,42.467c0.248-0.709,0.379-1.437,0.379-2.182c0-0.687-0.118-1.359-0.329-2.015C74.981,19.258,59.232,4.069,40,4.069  S5.019,19.258,4.113,38.27c-0.211,0.656-0.329,1.328-0.329,2.015c0,0.745,0.132,1.473,0.379,2.182  C5.37,60.15,19.419,74.352,37.036,75.799C37.987,76.259,38.978,76.5,40,76.5c0.999,0,1.972-0.245,2.915-0.698  C60.554,74.378,74.629,60.166,75.836,42.467z M7.069,40c0-0.384,0.016-0.764,0.029-1.145c1.521-3.571,8.578-7.156,19.022-8.905  c-0.359,3.252-0.554,6.713-0.554,10.334c0,3.621,0.195,7.081,0.554,10.333c-10.394-1.74-17.436-5.299-19.002-8.853  C7.087,41.18,7.069,40.592,7.069,40z M28.566,40.285c0-3.845,0.235-7.456,0.65-10.784c3.328-0.415,6.939-0.65,10.784-0.65  s7.456,0.235,10.784,0.65c0.415,3.328,0.65,6.94,0.65,10.784c0,1.623-0.043,3.254-0.127,4.848c-0.044,0.827,0.592,1.533,1.419,1.577  c0.843,0.038,1.534-0.593,1.577-1.419c0.087-1.646,0.131-3.331,0.131-5.006c0-3.621-0.195-7.081-0.554-10.334  c10.444,1.749,17.501,5.333,19.022,8.905c0.013,0.381,0.029,0.761,0.029,1.145c0,0.592-0.017,1.18-0.048,1.765  c-2.19,4.97-15.081,9.953-32.882,9.953c-3.844,0-7.456-0.235-10.784-0.65C28.802,47.74,28.566,44.129,28.566,40.285z M40,7.069  c4.007,0,8.35,7.493,10.333,19.336c-3.252-0.359-6.712-0.554-10.333-0.554s-7.081,0.195-10.333,0.554  C31.65,14.562,35.993,7,40,7.069z M72.291,33.544c-3.92-3.101-10.548-5.486-18.82-6.731c-1.274-8.466-3.742-15.211-6.95-19.093  C59.479,10.334,69.703,20.577,72.291,33.544z M33.478,7.72c-3.208,3.881-5.675,10.627-6.95,19.093  c-8.272,1.245-14.9,3.63-18.82,6.731C10.297,20.577,20.521,10.334,33.478,7.72z M7.859,47.145c3.938,3.043,10.504,5.381,18.669,6.61  c1.201,8,3.463,14.439,6.407,18.404C20.467,69.422,10.627,59.603,7.859,47.145z M47.01,72.172  c1.922-2.593,3.585-6.286,4.862-10.944c0.22-0.799-0.251-1.624-1.05-1.843c-0.801-0.223-1.624,0.252-1.843,1.05  c-1.75,6.386-4.274,10.843-6.904,12.423c-0.687,0.043-1.378,0.072-2.076,0.072c-0.695,0-1.384-0.029-2.069-0.072  c-3.354-2.045-6.621-8.875-8.265-18.695c3.252,0.359,6.712,0.554,10.333,0.554c14.332,0,26.211-2.992,32.141-7.573  C69.369,59.621,59.505,69.451,47.01,72.172z"
    />
  </svg>
</template>

<style lang="scss" scoped>
@use "@/style/_color.scss" as color;
$length: 883;

.path {
  position: relative;
  transition: all 1s ease-out;
  animation: infinite animate-double-lines 6s ease-in-out 50ms alternate-reverse;
}

.path--animated {
  z-index: 1;
}

.path--default {
  z-index: 0;
  stroke: rgba($champagne, 0.3);
  filter: drop-shadow(0 0 1px $champagne);
}

@keyframes animate-double-lines {
  from {
    stroke-dasharray: 0 calc($length / 2);
    stroke-dashoffset: calc($length / 4);
    filter: drop-shadow(0 0 4px $middle);
  }
  to {
    stroke-dasharray: calc($length / 2) 0;
    stroke-dashoffset: calc($length / 2);
  }
}
</style>
